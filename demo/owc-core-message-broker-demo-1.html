<link rel="import" href="../../polymer/polymer-element.html">

<!--MODULE-->
<dom-module id="owc-core-message-broker-demo-1">

  <!--VIEW-->
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <h2>Hello!!!</h2>
    <p>OWC CORE MODULE 1 [[prop1]] [[token]]</p>
    
    <!--Message broker migration Buttons-->
    <button on-click="publish">publish</button>    
    <button on-click="subscribe">subscribe</button>
    <button on-click="unsubscribe">unsubscribe</button>

  </template>

  <!--SCRIPT-->
  <script>
    
    class OwcCoreMessageBrokerDemo1 extends Polymer.Element {
        static get is() { return 'owc-core-message-broker-demo-1'; }
        static get properties() {
            return {
                prop1: {
                    type: String,
                    value: 'test1Prop'
                },

                //Token
                token:{
                    type: String,
                    value:""
                },

                _ctx: {
                    type: Object,
                    value: {}
                }
            };
        }
        
        //Button Hooks for message broker test

        //Publish
        publish(){
            this._ctx.mb.publish();
        }

        //Subscribe
        subscribe(){
            this._subscribe();
        }

        _subscribe(){
            //console.log("_subscribe called");
            this._ctx.mb.subscribe("t", "f", "targ");            
        }

        //Unsubscribe
        unsubscribe(){
            this._ctx.mb.unsubscribe();
        }
    }

    window.customElements.define(OwcCoreMessageBrokerDemo1.is, OwcCoreMessageBrokerDemo1);
  </script>

</dom-module>
